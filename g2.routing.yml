# G2 node reference.
g2.autocomplete:
  path: '/g2/autocomplete'
  defaults:
    _controller: '\Drupal\g2\Controller\Autocomplete::indexAction'
  requirements:
    _permission: 'access content'

# G2 WOTD RSS feed.
g2.feed.wotd:
  path: '/g2/feed/wotd'
  defaults:
    _controller: '\Drupal\g2\Controller\Feed::wotdAction'
    _title: 'Word of the day'
  requirements:
    _permission: 'access content'

# G2 default homonyms-matching page.
g2.homonyms:
  path: '/g2/homonyms/{g2_match}'
  defaults:
    _controller: '\Drupal\g2\Controller\Homonyms::indexAction'
    _title_callback: '\Drupal\g2\Controller\Homonyms::indexTitle'
  requirements:
    _permission: 'access content'
  options:
    parameters:
      g2_match:
        type: 'g2:node:title'


# G2 default entries-by-initial page.
g2.initial:
  path: '/g2/initial/{g2_initial}'
  defaults:
    _controller: '\Drupal\g2\Controller\Initial::indexAction'
    _title_callback: '\Drupal\g2\Controller\Initial::indexTitle'
  requirements:
    _permission: 'access content'
    g2_initial: '[_\-0-9a-zA-Z]'

# G2 default main page.
g2.main:
  path: '/g2'
  defaults:
    _controller: '\Drupal\g2\Controller\Main::indexAction'
    _title: 'G2 Glossary main page'
  requirements:
    _permission: 'access content'

# G2 node referrers
g2.node_referrers:
  path: '/node/{node}/g2_referrers'
  defaults:
    _form: '\Drupal\g2\Form\RefererWipe'
    _title: Referrers
    variant: count
  requirements:
    _permission: 'access content'
  options:
    _admin_route: false
    parameters:
      node:
        type: 'entity:node'
        bundle:
          - g2_entry
        converter: paramconverter.entity
    _access_checks:
      - access_check.permission

# Settings-related routes.
g2.settings:
  path: "admin/config/content/g2"
  defaults:
    _controller: '\Drupal\system\Controller\SystemController::systemAdminMenuBlockPage'
    _title: 'G2 Glossary'
  requirements:
    _permission: "administer site configuration"

g2.settings.api:
  path: "admin/config/content/g2/api"
  defaults:
    _form: 'Drupal\g2\Form\SettingsForm'
    _title: "G2 api configuration"
    section: "api"
  options:
    _admin_route: TRUE
  requirements:
    _permission: "administer site configuration"
g2.settings.block:
  path: "admin/config/content/g2/block"
  defaults:
    _form: 'Drupal\g2\Form\SettingsForm'
    _title: "G2 block configuration"
    section: "block"
  options:
    _admin_route: TRUE
  requirements:
    _permission: "administer site configuration"
  is_default: true
g2.settings.controllers:
  path: "admin/config/content/g2/controllers"
  defaults:
    _form: 'Drupal\g2\Form\SettingsForm'
    _title: "G2 controllers configuration"
    section: "controller"
  options:
    _admin_route: TRUE
  requirements:
    _permission: "administer site configuration"
g2.settings.formatting:
  path: "admin/config/content/g2/formatting"
  defaults:
    _form: 'Drupal\g2\Form\SettingsForm'
    _title: "G2 formatting configuration"
    section: "formatting"
  options:
    _admin_route: TRUE
  requirements:
    _permission: "administer site configuration"
g2.settings.services:
  path: "admin/config/content/g2/services"
  defaults:
    _form: 'Drupal\g2\Form\SettingsForm'
    _title: "G2 services configuration"
    section: "services"
  options:
    _admin_route: TRUE
  requirements:
    _permission: "administer site configuration"

g2.wipe.all:
  path: "g2/wipe"
  defaults:
    _form: 'Drupal\g2\Form\RefererWipe'
    _title: "Wipe all referrers on G2 entries"
    variant: all
  options:
    _admin_route: TRUE
  requirements:
    _permission: "administer site configuration"
g2.wipe.one:
  path: "g2/wipe/{node}"
  defaults:
    _form: 'Drupal\g2\Form\RefererWipe'
    _title: "Wipe all referrers on a specific G2 entry"
    variant: one
  options:
    _admin_route: TRUE
  requirements:
    _permission: "administer site configuration"
    _entity_access: 'node.view'
    node: \d+
